@mixin truncate($margin-right: 1em, $fallback-width: 95%) {
  display: inline-block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  // scss-lint:disable DuplicateProperty
  width: $fallback-width; // fallback for browsers which don't support calc()
  width: calc(100% - #{$margin-right});
}

@mixin no-wrap($display: inline-block) {
  display: $display;
  text-decoration: inherit;
  white-space: nowrap;
}

@mixin column-lines($breakpoint) {
  $gap: $grid-gutter-width / 2;
  margin: $gap #{-$gap};

  & > [class*="col-#{$breakpoint}-"] {
    border-left: $border;
    left: $gap;
    padding: 0 ($gap * 2) 0 $gap;

    > *:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    > *:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }
  }
}

@mixin not-last-child {
  > :not(:last-child) {
    @content;
  }
}

@mixin icon-size($width-height) {
  [class*=c-svg__icon] {
    height: $width-height;
    width: $width-height;
  }
}

/////////////////////////////////////////////////////
// Supporting @mixins for heading typography below //
/////////////////////////////////////////////////////

%base-heading {
  font-family: $headings-font-family;
  font-weight: $headings-font-weight;
  line-height: $headings-line-height;
  margin-bottom: $headings-margin-bottom;
  margin-top: $headings-margin-top;
}

@mixin h1 {
  @extend %base-heading;
  @include responsive-heading-size($font-size-h1, $font-size-h1-sm);
}

@mixin h2 {
  @extend %base-heading;
  @include after-heading-space();
  @include responsive-heading-size($font-size-h2, $font-size-h2-sm);
}

@mixin h3 {
  @extend %base-heading;
  @include after-heading-space();
  @include responsive-heading-size($font-size-h3);

  + h4,
  + .h4 {
    @include reduce-adjacent-heading-space();
  }
}

@mixin h4 {
  @extend %base-heading;
  @include after-heading-space();
  font-size: $font-size-h4;
  font-weight: 500;

  + h5,
  + .h5 {
    @include reduce-adjacent-heading-space();
  }
}

@mixin h5 {
  @extend %base-heading;
  @include after-heading-space();
  font-size: $font-size-h5;

  + h6,
  + .h6 {
    @include reduce-adjacent-heading-space();
  }
}

@mixin h6 {
  @include h5();
  font-weight: 500;
}

// Temporary mixin that selectively shifts all headings
// down to a base font-size of 14px on sm-down breakpoints.
// NOTE: h4 through h6 excluded to prevent smaller-than-body
// heading font sizes (this mixin would reduce it below 16px).
@mixin responsive-heading-size($normal-font-size, $mobile-font-size: $normal-font-size) {
  font-size: $normal-font-size;

  // Our curve from h1 through h6 leaves h1 a little too large
  // on mobile screens, resulting in overset type on many station
  // and line pages (MIDDLEBOROUGH). By passing an alternate "mobile
  // size as the second parameter in this function, we can override
  // the mobile font-size for the given heading element(2). Otherwise,
  // the standard curve and default font-sizes will apply normally.
  @include media-breakpoint-down(sm) {
    font-size: $mobile-font-size * .875; // 16px --> 14px ratio
  }
}

@mixin reduce-adjacent-heading-space {
  // Adjacent (sibling) headings should not have additional space
  // between them (similar concept to paragraphs following headlines).
  //
  // This rule helps sub-headings feel "attached" or grouped under
  // their parent headings, and not disjointed or ambiguous.
  //
  // EXCLUSIONS: H1 and H2, as well as H6. H1 usually exists in its
  // own space and we want to always have consistent space after it.
  // H2 is used to introduce large sections often with tables and other
  // non-text content, so it's OK to have the original space under it.
  // H6 has no following H7 element, so it's excluded for obvious reasons.
  margin-top: -.125em;
}

@mixin after-heading-space {
  // Paragraph copy directly following headlines have their own
  // built-in spacing (combined line-heights), so we undo the global
  // after-heading spacing when paragraphs directly follow headings.
  + p,
  + ul,
  + ol {
    margin-top: -.25em;
  }

  // When images are visually directly after a headline, they should
  // get the same gap non-paragraphs get by default (undo negative margin).
  + p > img:first-child,
  + p > a:first-child > img:first-child {
    margin-top: .25em;
  }
}

@mixin base-font-size {
  @include media-breakpoint-up(xxl) {
    font-size: $font-size-base-xxl;
  }

  @media print {
    // override the base font size.  Since everything (should) be defined in
    // rems, this makes all the text bigger.
    font-size: $font-size-base-print;
  }
}
