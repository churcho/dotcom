@import 'variables';
@import 'mixins';
@import 'bootstrap';
@import 'bootstrap-extra';
@import 'lato';
@import 'footer';
@import 'header';
@import 'page';
@import 'font-sizes';
@import 'vendor/font-awesome-4.6.3/scss/font-awesome';
@import 'social';

html {
  height: 100%;
  position: relative;
}

body {
  align-items: stretch;
  background-color: $homepage-bg-color;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  display: flex;
  height: 100%;
  justify-content: center;
  min-width: 20rem;
  text-rendering: optimizeLegibility;

  // if display: flex is not reverted to display: block in print mode,
  // Firefox only renders content on the first page.
  // Must also be reverted on .body-wrapper as well.
  // more details: https://app.asana.com/0/395349163493257/434551553219078
  @media print {
    color: $black;
    display: block;
  }

  &.no-js {
    .collapse:target {
      display: block;
    };

    .hidden-no-js {
      display: none;
    }
  }

  &.js {
    .hidden-js {
      display: none;
    }

    .sr-or-no-js {
      @include sr-only();
    }
  }

  // Only show the main content on the mTicket app's view
  &.mticket {
    .announcement-container,
    .header,
    .l-footer,
    .smartbanner {
      display: none;
    }

    // Remove space reserved for the footer
    .body-wrapper {
      margin-bottom: 0;
      padding-bottom: 0;
    }
  }

  // Display a label when viewing CMS content previews
  &.cms-preview {
    &::after {
      background-color: $alert-color;
      border: 1px solid darken($color: $alert-color, $amount: 10);
      border-radius: $border-radius;
      bottom: 1em;
      box-shadow: 0 0 .5em 0 transparentize($color: $black, $amount: .75);
      content: 'PREVIEW MODE';
      display: block;
      font-size: $font-size-h2;
      font-weight: bold;
      line-height: 1;
      padding: .5em;
      pointer-events: none;
      position: fixed;
      right: 1em;
      z-index: 100;
    }
  }
}

// undo styles in app.html.eex
.icon {
  height: initial;
  width: initial;
}

.icon-circle {
  fill: initial;
  stroke: initial;
  stroke-width: initial;
}

.container {
  @include media-breakpoint-up(md) {
    padding-left: 0;
    padding-right: 0;
  }
}

.body-wrapper {
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  height: 100%;
  max-width: 100%;
  width: 100%;

  // see comment inside body styles about display: block
  @media print {
    display: block;
  }
}

.header {
  @media print {
    display: none;
  }
}

.alert-announcement-container,
.header,
.breadcrumb-container,
.l-footer {
  flex: 0 0 auto;
  max-width: 100%;
  width: 100%;
}

.alert-announcement-container,
.header,
.breadcrumb-container {
  align-self: flex-start;
}

.l-footer {
  align-self: flex-end;
}

.pre-container-wrapper,
.post-container-wrapper,
.page-container {
  flex-basis: auto;
  flex-grow: 1;
  flex-shrink: 0;
}

.pre-container-wrapper,
.post-container-wrapper {
  max-width: 100%;
  width: 100%;
}

.post-container-wrapper {
  padding-bottom: $base-spacing;
  padding-top: $base-spacing;
}

.page-container {
  align-self: center;
  margin: 0 auto;
  padding: 0 0 $base-spacing * 2;
}

@each $breakpoint, $width in $container-max-widths {
  @include media-breakpoint-only($breakpoint) {
    .container,
    .page-container {
      max-width: $width;
    }

    .page-container {
      width: $width;
    }
  }
}

.page-narrow {
  @include media-breakpoint-up(md) {
    @include make-col-span(8);
    margin-left: auto;
    margin-right: auto;
  }
}

.main-container {
  background-color: $white;
  padding-bottom: $base-spacing;
}

@include media-breakpoint-down(sm) {
  // hide SM down, but remain visible to screen readers
  .focusable-sm-down {
    @include sr-only();
    @include sr-only-focusable();
  }
}

%top-bar {
  padding-bottom: $space-8;
  padding-top: $space-8;
}

.breadcrumb-container {
  @extend %top-bar;
  background-color: $gray-bordered-background;
  border: solid 1px $gray-lightest;
  color: $gray-dark;

  i {
    color: $gray-light;
    padding: 0 .5em;
  }
}

.announcement-container {
  background-color: $gray-bordered-background;
  border: solid 1px $gray-lightest;
  color: $gray-dark;
  padding-bottom: $base-spacing;
  padding-top: $base-spacing;

  @include media-breakpoint-down(sm) {
    padding-bottom: $base-spacing-sm;
    padding-top: $base-spacing-sm;
  }
}

.alert-announcement-container {
  @extend %top-bar;
  background-color: $alert-color-lighter;
  color: $gray-dark;
  font-size: $font-size-base;
  padding-bottom: $space-16;
  padding-top: $space-16;

  a {
    @include hover-focus-active {
      text-decoration: none;
    }
  }
}

.alert-announcement-header {
  color: $gray-dark;

  @include hover-focus-active {
    color: $gray-dark;
  }

  .alert-item-icon {
    margin-top: 0;
  }
}

.alert-announcement-message {
  float: left;
  width: 90%;

  @include media-breakpoint-only(md) {
    width: 80%;
  }

  @include media-breakpoint-down(sm) {
    width: 70%;
  }
}

// To be removed once the smart banner is disabled
div {
  &.smartbanner {
    top: -80px;
  }
}

.d-inline {
  display: inline;
}

figcaption {
  font-size: $font-size-sm;
  padding-top: $space-12;
  text-align: center;
  width: 100%;
}

.error-container {
  background-color: $form-error-message;
  margin-top: .5em;

  span {
    display: inline-block;
    margin: .5em;

    // NB this should use the single-colon syntax (i.e. :before); it's
    // older CSS2 syntax but FA uses it and due to the way SCSS @extend
    // works we need to match selector syntax.
    // scss-lint:disable PseudoElement
    &:before {
      @include fa-icon();
      content: $fa-var-exclamation-circle;
      margin-right: .25em;
    }
  }
}
