<div class="row mode-section" role="table">
  <div class="col-xs-12">
    <div class="row station-schedule-header station-route-row" role="row">
      <div class="col-xs-12 col-sm-6" role="columnheader">
        <%= mode_name @mode %>
      </div>
      <div class="col-sm-6 hidden-xs-down" role="columnheader">
        Upcoming Departures
      </div>
    </div>
  </div>
  <div class="col-xs-12">
    <div class="row" role="row">
      <%= for route_time <- @route_times do %>
          <%= if route_time.departures != [] do %>
            <%= link class: "station-route-row", to: trip_view_path(@conn, :show, route_time.route, origin: @stop.id, direction_id: route_time.direction_id) do %>
              <div class="col-xs-12 mode-route-name" role="cell">
                <%= svg_icon_with_circle(%SvgIconWithCircle{icon: route_time.route, size: :small}) %>
                <%= route_time.route.name %>
              </div>
              <div class="clearfix">
                <%= for {headsign, departures} <- route_time.departures do %>
                  <div class="clearfix">
                    <div class="col-md-6 col-sm-12 station-trip-headsign">
                      <%= direction_with_headsign(route_time.route, route_time.direction_id, headsign) %>
                      <%= if has_alerts?(@all_alerts, @date, %Alerts.InformedEntity{route: route_time.route.id, direction_id: route_time.direction_id}) do %>
                        <%= svg_icon(%SvgIcon{icon: :alert, class: "icon-small"}) %>
                      <% end %>
                    </div>
                    <div class="col-md-6 col-sm-12">
                      <div class="row" role="cell">
                        <%= for time_difference <- time_differences(departures, @date_time) do %>
                          <div class="no-wrap schedule-upcoming-departure col-sm-4 col-xs-12">
                            <%= time_difference %>
                          </div>
                        <% end %>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>
            <% end %>
          <% end %>
      <% end %>
      <%= station_schedule_empty_msg(@mode) %>
    </div>
  </div>
</div>
