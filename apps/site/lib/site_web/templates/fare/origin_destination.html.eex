<h1><%= mode_name(@mode) %> Fares</h1>
<h2>Find Your Fare</h2>
<%= origin_destination_description(@mode) %>
<div class="callout">
  <div class="row">
    <div class="col-xs-12 col-md-6 fare-selector-container">
      <%= render SiteWeb.PartialView, "_stop_selector.html",
        conn: @conn,
        query_key: "origin",
        selected: (if @origin, do: @origin.id, else: nil),
        disabled: nil,
        all_stops: @origin_stops,
        key_stops: @key_stops,
        label_text: "Enter your origin",
        placeholder_text: "a stop",
        exclude: ["destination"],
        disabled_values: [],
        route_type: @route_type
      %>
    </div>
    <%= unless @origin == nil do %>
      <div class="col-xs-12 col-md-6 fare-selector-container">
        <%= render SiteWeb.PartialView, "_stop_selector.html",
          conn: @conn,
          query_key: "destination",
          selected: (if @destination, do: @destination.id, else: nil),
          disabled: (if @origin, do: @origin.id, else: nil),
          all_stops: @destination_stops,
          key_stops: destination_key_stops(@destination_stops, @key_stops),
          label_text: "Enter your destination",
          placeholder_text: "a stop",
          disabled_values: [],
          route_type: @route_type
        %>
      </div>
    <% end %>
  </div>
</div>

<p>View table of <%= link "fares by zone.", to: fare_path(@conn, :zone) %></p>

<%= unless @selected_filter == nil do %>
  <%= if @origin && @destination do %>
    <div class="row">
      <div class="col-xs-12">
        <p>
          <strong><%= Fares.Format.name(List.first(@selected_filter.fares)) %> Fare</strong>
          <span class="hidden-xs-down">|</span><span class="hidden-sm-up"><br /></span>
          <%= @origin.name %> <i class="fa fa-arrow-right"></i> <%= @destination.name %>
        </p>
        <p class="fares-info-lead">
          People 12 and older who do not qualify for
          <%= link to: cms_static_page_path(@conn, "/fares/reduced") do %>
            reduced fares
          <% end %>
          pay the standard fare. If you are a student, senior, or someone with a disability
          who qualifies for reduced fares, click on the correct category below to view your fare.
          Children 11 and younger accompanied by a paying adult ride for free (up to 2 children per adult).
        </p>
      </div>
    </div>
  <% end %>
  <%= render "_fares_display.html", selected_filter: @selected_filter, filters: @filters, conn: @conn, fare_type: @fare_type %>
<% end %>

<h2>Where to Get a Ticket or Pass</h2>
<div class="row">
  <div class="col-sm-6 col-xs-12">
    <h3>mTicket App</h3>
    <div class="commuter-fare-content">
      <p>
        You can purchase a One Way, Round Trip, 10-Ride, or Monthly Pass through the mTicket app. Monthly Passes on mTicket are $10.00 cheaper than they are on a CharlieTicket. However, unlike passes loaded onto a CharlieTicket, mTicket passes are not valid for use on the Bus and Subway. mTicket App is available in the iPhone App Store and Google Play.
      </p>
      <p>
        <a href="https://itunes.apple.com/us/app/mbta-mticket/id560487958?mt=8">
          <span class="sr-only">Download on the App Store</span>
          <%= svg("badge-apple-store.svg") %></a>
        <a href="https://play.google.com/store/apps/details?id=com.mbta.mobileapp">
          <span class="sr-only">Get it on Google Play</span>
          <%= svg("badge-google-play.svg") %></a>
      </p>
    </div>
    <div class="commuter-rail-photo-video-container">
      <iframe class="commuter-rail-photo-video" src="https://www.youtube.com/embed/6gBcPlPsm9k?rel=0" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>
  <div class="col-sm-6 col-xs-12">
    <h3>Fare Vending Machines</h3>
    <div class="commuter-fare-content">
      <p>
        You can load a One Way, Round Trip, or Monthly (up to Zone 8) Pass onto a CharlieTicket at fare vending machines located in all Subway stations and the following Commuter Rail stations:
      </p>
      <p>
        <%= vending_machine_stations() %>
      </p>
    </div>
    <figure class="commuter-rail-photo-video-container">
      <%= img_tag static_url(@conn, "/images/retail-sales-locations.jpg"), class: "commuter-rail-photo-video img-fluid", alt: "A fare vending machine in an MBTA station" %>
    </figure>
  </div>
</div>
<div class="row">
  <div class="col-sm-6 col-xs-12">
    <h3>On-Board</h3>
    <p>
      You can purchase a One Way or Round Trip Pass on-board with cash. If you board the train at a station that has a fare vending machine, using cash on-board may result in an additional $3.00 fee on top of your regular fare. Round Trip Passes purchased on-board will be valid until the end of service that same day.
    </p>
    <p><span class="font-weight-bold">Please note:</span> During <a href="/fares/fare-fair">Fare Is Fair events</a>, you cannot purchase your Commuter Rail fare on board.</p>
  </div>
  <div class="col-sm-6 col-xs-12">
    <h3>Retail Sales Locations</h3>
    <p>
      You can get One Way, Round Trip, and Monthly (valid for Bus and Subway travel as well) Passes on a CharlieTicket at retail stores located throughout the Greater Boston and Providence areas.
    </p>
    <p>
      <%= link to: fare_path(@conn, :show, "retail-sales-locations") do %>
        Find a store near you <%= fa "arrow-right" %>
      <% end %>
    </p>
  </div>
</div>
<h2>Related Pages</h2>
<div class="l-title-cards">
  <%= render "_mode_pay.html", mode: @mode, conn: @conn %>
  <%= render "_related_page_card.html", title: "Payment Methods", body: ["Ways to pay your fare", "Where each payment method can be used", "Types of fares you can load onto each payment method"], href: cms_static_page_path(@conn, "/fares/how-to-pay"), target: "_self" %>
  <%= render "_related_page_card.html", title: "Pass Purchase Programs", body: ["Corporations", "Schools and Universities", "Tour and Field Trip groups"], href: redirect_path(@conn, "pass_program"), target: "_blank" %>
  <%= render "_related_page_card.html", title: "Reduced Fares", body: ["Qualifications", "Reduced fare rates", "How to get your reduced fare"], href: fare_path(@conn, :show, :reduced), target: "_self" %>
</div>
